{% extends 'base.html' %}

{% block page_title %}ç•…é”€æ¦œå•{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header"><i class="fas fa-trophy"></i> ç•…é”€è¯å“æ’è¡Œ</div>
    <div class="card-body">
        <form method="GET" class="row g-3 mb-4">
            <div class="col-md-3">
                <select class="form-select" name="days">
                    <option value="7" {{ 'selected' if days == 7 }}>è¿‘7å¤©</option>
                    <option value="30" {{ 'selected' if days == 30 }}>è¿‘30å¤©</option>
                    <option value="90" {{ 'selected' if days == 90 }}>è¿‘90å¤©</option>
                    <option value="365" {{ 'selected' if days == 365 }}>è¿‘ä¸€å¹´</option>
                </select>
            </div>
            <div class="col-md-2">
                <button type="submit" class="btn btn-primary"><i class="fas fa-search"></i> æŸ¥è¯¢</button>
            </div>
        </form>
        
        <table class="table">
            <thead><tr><th>æ’å</th><th>è¯å“åç§°</th><th>è§„æ ¼</th><th>ç±»åˆ«</th><th>é”€å”®æ•°é‡</th><th>é”€å”®é¢</th><th>è®¢å•æ•°</th></tr></thead>
            <tbody>
                {% for r in data %}
                <tr>
                    <td>
                        {% if loop.index == 1 %}<span class="badge bg-warning">ğŸ¥‡</span>
                        {% elif loop.index == 2 %}<span class="badge bg-secondary">ğŸ¥ˆ</span>
                        {% elif loop.index == 3 %}<span class="badge bg-danger">ğŸ¥‰</span>
                        {% else %}{{ loop.index }}{% endif %}
                    </td>
                    <td class="fw-bold">{{ r.med_name }}</td>
                    <td>{{ r.spec }}</td>
                    <td><span class="badge {{ 'bg-danger' if r.category == 'å¤„æ–¹è¯' else 'bg-success' }}">{{ r.category }}</span></td>
                    <td class="fw-bold text-primary">{{ r.total_sold }}</td>
                    <td class="text-success">Â¥{{ "%.2f"|format(r.total_revenue or 0) }}</td>
                    <td>{{ r.order_count }}</td>
                </tr>
                {% else %}
                <tr><td colspan="7" class="text-center text-muted">æš‚æ— é”€å”®æ•°æ®</td></tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
